#具体软件流程和通信协议过程

--------

| 时间        |  版本   |    内容  |    作者  |
| :--------: | :-----: | :----:  | :-----:  |
| 2015-5-24  |  0.1    |         | 林上耀   |

## ARM

1. collect线程
	负责收集数据，按顺序遍历所有从节点
	1. 等待定时器周期中断，开始采集环节。
	2. 读取USB数据，进入阻塞而睡眠，等待传输完成。
	3. 当传输完成时被唤醒，构建任务并发送消息(条件变量)给`process`线程 。
	4. 重复上述过程直至所有设备读取完毕。
	5. Repeat

2. process线程
	负责按顺序解析数据包，数据处理，数据包压缩。
	1. 等待`collect`线程发送来的任务。
	2. 根据任务类型(SEMG或sensor)，进行数据解析验证。
	3. 数据处理，包括信号处理。
	4. 数据压缩。
	5. 数据打包。
	5. 重复上述过程直到所有设备处理完毕。
	6. 发送消息(条件变量)给`socket`线程。
	7. Repeat

3. socket线程
	负责数据发送
	1. 等待来自`process`线程的消息。
	2. 接收上位机命令
	3. 发送握手包或实际数据包
	4. repeat

## PC
发送请求给ARM，接收数据